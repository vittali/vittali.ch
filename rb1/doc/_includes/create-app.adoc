
== Create the _My-Node-RED-App_ and the associated infrastructure

In this chapter we will create three items:

. the application itself,
. the database used to store sensor data.
. the build and deploy delivery toolchain

NOTE: there are several Node-RED-Bluemix tutorials on the internet where the database also stores the Node-Red flow files.
This is suitable for a work flow where development is done remotely.
However, in the work flow discussed in this tutorial, all development is done
locally and the flow files are pushed to repository each time the application is modified.

=== Create the application and the database
. If you have not yet created a <<Bac>> do it now.
. From the Bluemix Dashboard page, click on the _Catalog_ menu.
. From the Starter Kits Category, click on _Node-Red Starter_
. Enter the App name: _My-Node-RED-App_
. Selected Plan: _Lite_
. Select the _Cloudant_ service to be connected to the app:

.The Cloudant Service link
image::select-cloudant.png[Cloudant]


This brings us to the _Getting started_ pane of the application's dashboard:

.The _My-Node-RED-App_ Dashboard
image::app.png[App Dashboard]

We are now ready to activate Toolchain support.

=== Create the continuous delivery toolchain

. Click _Overview_
. on the bottom right _Continuous delivery_ click on _Enable_.
. in the _Repository Type_ drop down menu, select _New_.
. enter the <<Bac>>
. click on _Create_

You are looking at the dashboard of the Continuous Delivery Toolchain:

.The Continuous Delivery Toolchain
image::toolchain.png[Toolchain]

Now, we need to get access to this repository:

. click on the Git tile.
. set up your git access code using a public SSH key: `top right corner icon -> Settings -> SSH Keys`
. copy the link to the repository and clone it:

.The new empty repository for the app
image::git.png[Git]

[listing]
$ git clone git@eu-gb.git.cloud.ibm.com:<your name>/My-Node-RED-App.git

NOTE: the directory _My-Node-RED-App_ into which we cloned the repository is called the *project directory*.


Now go back to the application's dashboard, then click on `Runtime -> Environment variables
-> VCAP_SERVICES -> Export` to export this environment variable to
a file named `My-Node-RED-App_vcap.json` into the project directory.

This file now contains all the Bluemix specific data that we need to run our app locally.
